<!--go cart modal fail-->
<div class="go-cart__modal go-cart__modal--fail js-go-cart-modal-fail">

    <div class="go-cart-modal">

        <!--go cart modal close-->
        <div class="go-cart-modal__close js-go-cart-modal-fail-close">

            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                <path d="M15.89 14.696l-4.734-4.734 4.717-4.717c.4-.4.37-1.085-.03-1.485s-1.085-.43-1.485-.03L9.641 8.447 4.97 3.776c-.4-.4-1.085-.37-1.485.03s-.43 1.085-.03 1.485l4.671 4.671-4.688 4.688c-.4.4-.37 1.085.03 1.485s1.085.43 1.485.03l4.688-4.687 4.734 4.734c.4.4 1.085.37 1.485-.03s.43-1.085.03-1.485z"></path>
            </svg>

        </div>
        <!--end go cart modal close-->

        <!--go cart modal content-->
        <div class="go-cart-modal__content js-go-cart-modal-fail-content">
            Something went wrong, please contact us!
        </div>
        <!--end go cart modal content-->

    </div>

</div>
<!--end go cart modal fail-->

<!--go cart modal-->
<div class="go-cart__modal js-go-cart-modal">

    <div class="go-cart-modal">

        <!--go cart modal close-->
        <div class="go-cart-modal__close js-go-cart-modal-close">

            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                <path d="M15.89 14.696l-4.734-4.734 4.717-4.717c.4-.4.37-1.085-.03-1.485s-1.085-.43-1.485-.03L9.641 8.447 4.97 3.776c-.4-.4-1.085-.37-1.485.03s-.43 1.085-.03 1.485l4.671 4.671-4.688 4.688c-.4.4-.37 1.085.03 1.485s1.085.43 1.485.03l4.688-4.687 4.734 4.734c.4.4 1.085.37 1.485-.03s.43-1.085.03-1.485z"></path>
            </svg>

        </div>
        <!--end go cart modal close-->

        <!--go cart modal content-->
        <div class="go-cart-modal__content js-go-cart-modal-content"></div>
        <!--end go cart modal content-->

        <!--go cart modal buttons-->
        <div class="go-cart-modal__buttons">

            <a class="go-cart__button js-go-cart-modal-close">
                Continue shopping
            </a>

            <a href="/cart/" class="go-cart__button">
                View cart
            </a>

        </div>
        <!--end go cart modal buttons-->

    </div>

</div>
<!--end go cart modal-->

<!--go cart drawer-->
<div class="go-cart__drawer js-go-cart-drawer">

    <div class="go-cart-drawer">

        <!--go cart drawer close-->
        <div class="go-cart-drawer__header w-full">

            <h3 class="text-2xl font-normal">Your cart</h3>
            <div class="go-cart-drawer__close js-go-cart-drawer-close">

                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <path d="M15.89 14.696l-4.734-4.734 4.717-4.717c.4-.4.37-1.085-.03-1.485s-1.085-.43-1.485-.03L9.641 8.447 4.97 3.776c-.4-.4-1.085-.37-1.485.03s-.43 1.085-.03 1.485l4.671 4.671-4.688 4.688c-.4.4-.37 1.085.03 1.485s1.085.43 1.485.03l4.688-4.687 4.734 4.734c.4.4 1.085.37 1.485-.03s.43-1.085.03-1.485z"></path>
                </svg>

            </div>

        </div>
        <!--end go cart drawer close-->

        <!--go cart drawer content-->
        <div class="go-cart-drawer__content js-go-cart-drawer-content">

        </div>
        <!--end go cart drawer content-->

        <div class="px-12 py-2">
            {% assign cart_items = null %}
            {% assign collections_list = null %}
            {% assign max_products = 6 %}
            {% assign max_products_per_collection = 3 %}
            {% assign shown_products = 0 %}
            {% assign upsell_list = null %}


            {% for line_item in cart.items %}
                {% assign cart_items = cart_items | append: ',' | append: line_item.product.handle %}
                {% for _collection in line_item.product.collections %}
                    {% assign collections_list = collections_list | append: ',' | append: _collection.handle %}
                {% endfor %}
                
            {% endfor %}

            {% assign cart_items = cart_items | split: ',' %}
            {% assign collections_list = collections_list | split: ',' | uniq | compact %}

            {% for _collection in collections_list %}
               
                {% assign _collection_object = collections[_collection] %}
                {% assign included_products = 0 %}
                {% for _product in _collection_object.products %}
                    
                    {% unless cart_items contains _product.handle %}

                        {% if _product.available %}

                            {% assign upsell_list = _product.handle | append: ',' | append: upsell_list %}
                            {% assign included_products = included_products | plus: 1 %}

                        {% endif %}
                     

                    {% endunless  %}

                {% if included_products >= max_products_per_collection %} {% break %} {% endif %}

                {% endfor %}

            {% endfor %}

            {% assign upsell_list = upsell_list | split: ',' | uniq | compact %}

            {% if upsell_list != blank %}

                <ul class="go-cart-upsell-list space-x-2 flex overflow-x-auto" x-data="{items: [], addItem(_item){ this.items.push(_item)} }">
                    {% for product_handle in upsell_list %}
                        {% assign product_ref = all_products[product_handle] %}
                            {% assign shown_products = shown_products | plus: 1 %}
                                <li id="{{product_ref.selected_or_first_available_variant.id}}" x-show="!items.includes({{product_ref.selected_or_first_available_variant.id}})" x-ref="item_{{product_ref.selected_or_first_available_variant.id}}">
                                    {% render 'upsell-product', product_ref: product_ref%}
                                </li>
                            {% if shown_products >= max_products %} {% break %} {% endif %}
                    {% endfor %}
                </ul>
            {% endif %}
        </div>

        <!--go cart drawer subtotal-->
        <div class="go-cart-drawer__subtotal">
            <span>Subtotal: </span>
            <span class="go-cart-drawer__subtotal-price js-go-cart-drawer-subtotal"></span>
        </div>
        <!--end go cart drawer subtotal-->

        <!--go cart drawer buttons-->
        <div class="go-cart-drawer__footer js-go-cart-drawer-footer">

            <a href="/checkout/" class="go-cart__button">
               Checkout
            </a>

        </div>
        <!--end go cart drawer buttons-->

    </div>

</div>
<!--end go cart drawer-->

<!--go cart overlay-->
<div class="go-cart__overlay js-go-cart-overlay">
</div>
<!--end go cart overlay-->